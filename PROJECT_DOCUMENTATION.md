# Документация проекта TaskTracker
*Документация разработана в соответствии с национальным стандартом РФ ГОСТ Р ИСО/МЭК 12207-2010*

## 1. Общая информация о проекте

### 1.1 Наименование проекта
**TaskTracker** - Система управления задачами с аутентификацией и авторизацией

### 1.2 Версия проекта
- **Версия**: 0.0.1-SNAPSHOT
- **Дата создания документации**: 24.10.2025
- **Статус**: В разработке

### 1.3 Описание проекта
TaskTracker - это **REST API сервер** для управления задачами, построенный на Spring Boot. Система предоставляет REST API для создания, назначения, отслеживания и управления задачами с поддержкой ролевой модели доступа и уведомлений через Apache Kafka. Приложение работает как backend-сервис без собственного пользовательского интерфейса.

### 1.4 Модель жизненного цикла
Проект разрабатывается в соответствии с **национальным стандартом РФ ГОСТ Р ИСО/МЭК 12207-2010** "Системная и программная инженерия. Процессы жизненного цикла программных средств", который идентичен международному стандарту ИСО/МЭК 12207-2008.

## 2. Техническая архитектура

### 2.1 Технологический стек

#### 2.1.1 Основные технологии
- **Java**: 17
- **Spring Boot**: 3.5.4
- **Spring Security**: Для аутентификации и авторизации
- **Spring Data JPA**: Для работы с базой данных
- **Spring Kafka**: Для асинхронных уведомлений
- **PostgreSQL**: Основная база данных
- **Apache Kafka**: Система сообщений
- **Docker**: Контейнеризация

#### 2.1.2 Дополнительные библиотеки
- **Lombok**: Для сокращения boilerplate кода
- **Jackson**: Для JSON сериализации/десериализации
- **JWT (JSON Web Tokens)**: Для аутентификации
- **JUnit 5**: Для тестирования
- **Mockito**: Для мокирования в тестах

### 2.2 Архитектурные компоненты

#### 2.2.1 Слой представления (Presentation Layer)
- **Controller**: REST API контроллеры для обработки HTTP запросов
- **JWT Authentication**: Система аутентификации на основе токенов

#### 2.2.2 Бизнес-логика (Business Logic Layer)
- **Service**: Сервисы для бизнес-логики
  - `TaskService`: Управление задачами
  - `UserService`: Управление пользователями
  - `CommentService`: Управление комментариями
  - `CustomUserDetailsService`: Интеграция с Spring Security

#### 2.2.3 Слой данных (Data Access Layer)
- **Repository**: Репозитории для доступа к данным
  - `TaskRepository`: Работа с задачами
  - `UserRepository`: Работа с пользователями
  - `CommentRepository`: Работа с комментариями

#### 2.2.4 Слой сущностей (Entity Layer)
- **Entity**: JPA сущности
  - `Task`: Задача
  - `User`: Пользователь
  - `Comment`: Комментарий
  - `Status`: Статус задачи (enum)
  - `Importance`: Важность задачи (enum)
  - `Role`: Роль пользователя (enum)

#### 2.2.5 Интеграционный слой (Integration Layer)
- **Kafka Integration**: Асинхронные уведомления
- **JWT Integration**: Аутентификация

## 3. Процессы жизненного цикла (ГОСТ Р ИСО/МЭК 12207-2010)

### 3.1 Процессы соглашения
#### 3.1.1 Процесс приобретения
- Определение требований к системе управления задачами
- Выбор технологического стека (Spring Boot, PostgreSQL, Kafka)
- Определение критериев приемки

#### 3.1.2 Процесс поставки
- Разработка системы TaskTracker
- Создание документации проекта
- Поставка готового продукта

### 3.2 Процессы проекта
#### 3.2.1 Процесс управления проектом
- Планирование разработки
- Контроль сроков и качества
- Управление рисками

#### 3.2.2 Процесс управления конфигурацией
- Управление версиями кода
- Контроль изменений
- Ведение репозитория

#### 3.2.3 Процесс обеспечения качества
- Разработка unit-тестов
- Интеграционное тестирование
- Контроль качества кода

#### 3.2.4 Процесс верификации
- Проверка соответствия требованиям
- Тестирование функциональности
- Валидация архитектуры

#### 3.2.5 Процесс аттестации
- Проверка готовности системы
- Тестирование в среде эксплуатации
- Подтверждение соответствия требованиям

### 3.3 Технические процессы
#### 3.3.1 Процесс определения требований к системе

##### 3.3.1.1 Backend требования
- **Управление пользователями**:
  - Регистрация пользователей с ролью USER
  - Регистрация администраторов с ролью ADMIN
  - Аутентификация с JWT токенами
  - Управление пользователями (удаление)

- **Управление задачами**:
  - Создание задач с назначением исполнителя
  - Обновление параметров задач
  - Отслеживание статуса (НЕ_НАЧАТА, В_РАБОТЕ, ЗАВЕРШЕНА, НА_ДОРАБОТКЕ)
  - Управление важностью (СРОЧНАЯ, НАДО_ПОТОРОПИТЬСЯ, МОЖЕТ_ПОДОЖДАТЬ)

- **Система комментариев**:
  - Добавление комментариев к задачам
  - Обязательные комментарии при доработке

- **Уведомления**:
  - Асинхронные уведомления через Apache Kafka
  - Producer/Consumer архитектура

##### 3.3.1.2 REST API интерфейс (реализованный)

**3.3.1.2.1 Архитектура REST API сервера**
- **Технологический стек**:
  - **Spring Boot 3.5.4** как основная платформа
  - **Spring Web** для REST API контроллеров
  - **Spring Security** для аутентификации и авторизации
  - **JWT токены** для stateless аутентификации
  - **JSON** для обмена данными
  - **Maven** для управления зависимостями

- **Архитектурные принципы**:
  - **RESTful API** архитектура
  - **Stateless** - без сохранения состояния на сервере
  - **JWT-based authentication** для безопасности
  - **Role-based access control** (RBAC)
  - **Модульная структура** с четким разделением ответственности

**3.3.1.2.2 Реализованные REST API endpoints**

*Аутентификация и регистрация:*
- `POST /register` - Регистрация обычного пользователя (USER)
- `POST /registeradmin` - Регистрация администратора (ADMIN)
- `POST /login` - Аутентификация пользователя, возвращает JWT токен

*Управление пользователями:*
- `GET /user?username={username}` - Получение информации о пользователе
- `GET /allusers` - Получение списка всех пользователей
- `GET /userwithouttasks?username={username}` - Получение пользователя без задач
- `GET /allusersname` - Получение списка имен пользователей (только для ADMIN)
- `DELETE /deleteuser/{username}` - Удаление пользователя (только для ADMIN)

*Управление задачами:*
- `PUT /markthetaskascompleted?taskId={id}` - Отметить задачу как выполненную
- `PUT /markthetaskasinwork?taskId={id}` - Отметить задачу как "в работе"
- `PUT /markthetaskasonrework?taskId={id}` - Отправить задачу на доработку (только ADMIN)
- `PUT /updatetask` - Обновление задачи (только ADMIN)

*Служебные endpoints:*
- `GET /main` - Возвращает HTML страницу "main" (простая заглушка)

**3.3.1.2.3 Модель данных (реализованная)**

*Сущность Task:*
- `id` (Long) - Уникальный идентификатор
- `title` (String) - Название задачи
- `description` (String) - Описание задачи
- `status` (Status enum) - Статус: НЕ_НАЧАТА, В_РАБОТЕ, ЗАВЕРШЕНА, НА_ДОРАБОТКЕ
- `importance` (Importance enum) - Важность: СРОЧНАЯ, НАДО_ПОТОРОПИТЬСЯ, МОЖЕТ_ПОДОЖДАТЬ
- `deadline` (LocalDateTime) - Срок выполнения
- `assignee` (User) - Исполнитель задачи
- `comments` (List<Comment>) - Комментарии к задаче

*Сущность User:*
- `id` (Long) - Уникальный идентификатор
- `username` (String) - Имя пользователя
- `password` (String) - Зашифрованный пароль
- `role` (Role enum) - Роль: USER, ADMIN

*Сущность Comment:*
- `id` (Long) - Уникальный идентификатор
- `description` (String) - Текст комментария
- `task` (Task) - Связанная задача

**3.3.1.2.4 Безопасность (реализованная)**
- **JWT токены** для аутентификации
- **BCrypt** для хеширования паролей
- **Role-based авторизация** с @PreAuthorize
- **CORS** настройки для cross-origin запросов
- **Stateless** аутентификация без сессий

**3.3.1.2.5 Требования к производительности REST API**

*Время отклика:*
- Время обработки запроса: не более 500ms
- Время аутентификации: не более 200ms
- Время выполнения CRUD операций: не более 1 секунды
- Время обработки Kafka сообщений: не более 100ms

*Оптимизация:*
- Кэширование JWT токенов
- Оптимизация SQL запросов с помощью JPA
- Асинхронная обработка Kafka сообщений
- Connection pooling для базы данных
- Профилирование с помощью Spring Boot Actuator

**3.3.1.2.6 Требования к тестированию REST API**

*Unit-тестирование:*
- Покрытие контроллеров тестами: не менее 80%
- Тестирование сервисов и репозиториев
- Мокирование внешних зависимостей
- Тестирование JWT токенов и безопасности

*Интеграционное тестирование:*
- Тестирование REST endpoints с @SpringBootTest
- Тестирование взаимодействия с базой данных
- Тестирование Kafka интеграции
- Тестирование Spring Security

*API тестирование:*
- Тестирование HTTP запросов с MockMvc
- Тестирование JSON сериализации/десериализации
- Тестирование валидации входных данных
- Тестирование обработки ошибок

*Инструменты тестирования:*
- **JUnit 5** для unit-тестов
- **MockMvc** для тестирования REST API
- **Mockito** для мокирования зависимостей
- **Testcontainers** для интеграционного тестирования
- **Spring Boot Test** для контекстного тестирования

#### 3.3.2 Процесс анализа требований к системе
- Анализ требований пользователей
- Определение архитектурных ограничений
- Выбор технологических решений

#### 3.3.3 Процесс архитектурного проектирования системы

##### 3.3.3.1 Backend архитектура
- Проектирование REST API
- Проектирование базы данных
- Проектирование системы безопасности

##### 3.3.3.2 REST API сервер архитектура

**3.3.3.2.1 Архитектурные слои REST API сервера**
- **Презентационный слой (Presentation Layer)**:
  - REST контроллеры (@RestController)
  - HTTP endpoints для API
  - JSON сериализация/десериализация
  - Обработка HTTP запросов и ответов

- **Слой бизнес-логики (Business Logic Layer)**:
  - Сервисы для бизнес-логики (@Service)
  - JPA сущности и репозитории
  - Валидация данных и бизнес-правила
  - JWT аутентификация и авторизация

- **Слой данных (Data Layer)**:
  - JPA репозитории для доступа к БД
  - PostgreSQL база данных
  - Kafka для асинхронных сообщений
  - Обработка транзакций и кэширование

**3.3.3.2.2 Паттерны проектирования для Spring Boot**
- **MVC (Model-View-Controller)**: разделение логики и представления
- **Repository Pattern**: абстракция доступа к данным
- **Service Layer Pattern**: инкапсуляция бизнес-логики
- **Dependency Injection**: управление зависимостями
- **Observer Pattern**: через Spring Events и Kafka

**3.3.3.2.4 Интеграция с внешними системами**
- **PostgreSQL**: основная база данных через JPA
- **Apache Kafka**: асинхронные уведомления
- **Spring Security**: аутентификация и авторизация
- **Docker**: контейнеризация приложения
- **Maven**: управление зависимостями

#### 3.3.4 Процесс интеграции системы
- Интеграция компонентов Spring Boot
- Интеграция с PostgreSQL
- Интеграция с Apache Kafka

#### 3.3.5 Процесс квалификационного тестирования системы
- Системное тестирование
- Интеграционное тестирование
- Тестирование производительности

### 3.4 Процессы поддержки

#### 3.4.1 Процесс документирования

##### 3.4.1.1 Backend документация
- Создание технической документации
- Документирование API
- Руководство пользователя

##### 3.4.1.2 REST API документация
- **Техническая документация**:
  - Архитектурные решения и обоснования
  - OpenAPI/Swagger документация для API
  - Схемы базы данных и ER диаграммы
  - Конфигурация Spring Security и JWT

- **API документация**:
  - Описание всех REST endpoints
  - Примеры запросов и ответов
  - Коды ошибок и их обработка
  - Аутентификация и авторизация

- **Документация для разработчиков**:
  - README с инструкциями по запуску
  - Стандарты кодирования и code style
  - Документация по тестированию

#### 3.4.2 Процесс управления конфигурацией

##### 3.4.2.1 Backend конфигурация
- Версионирование кода
- Управление зависимостями
- Контроль изменений

##### 3.4.2.2 REST API конфигурация

- **Управление зависимостями**:
  - pom.xml с точными версиями
  - Maven dependency management
  - Аудит безопасности зависимостей
  - Обновление зависимостей по расписанию

- **Конфигурация сборки**:
  - Maven build configuration
  - Spring Boot profiles
  - Environment variables
  - Docker configuration
  
##### 3.4.3.1 Backend качество
- Code review
- Автоматизированное тестирование
- Статический анализ кода

##### 3.4.3.2 REST API качество

- **Автоматизированное тестирование**:
  - Unit тесты для сервисов и контроллеров (JUnit 5)
  - Integration тесты для API endpoints (MockMvc)
  - Тестирование безопасности (Spring Security Test)
  - Тестирование базы данных (Testcontainers)

- **Статический анализ**:
  - Checkstyle для Java кода
  - SpotBugs для поиска багов
  - PMD для анализа качества кода
  - SonarQube для комплексного анализа

#### 3.4.4 Процесс верификации

##### 3.4.4.1 Backend верификация
- Unit-тестирование
- Интеграционное тестирование
- Тестирование безопасности

##### 3.4.4.2 REST API верификация
- **Unit-тестирование**:
  - Тестирование сервисов изолированно
  - Тестирование контроллеров и репозиториев
  - Мокирование внешних зависимостей
  - Тестирование JWT утилит

- **Интеграционное тестирование**:
  - Тестирование взаимодействия с базой данных
  - Тестирование Kafka интеграции
  - Тестирование Spring Security
  - Тестирование полного API workflow

- **Тестирование безопасности**:
  - JWT токены и валидация
  - Role-based авторизация
  - SQL injection защита
  - CORS настройки

- **Тестирование производительности**:
  - Load testing с JMeter
  - Memory usage monitoring
  - Database connection pooling
  - Response time benchmarks

#### 3.4.5 Процесс аттестации

##### 3.4.5.1 Backend аттестация
- Проверка готовности к развертыванию
- Тестирование в production-подобной среде
- Подтверждение соответствия требованиям

##### 3.4.5.2 REST API аттестация
- **Готовность к развертыванию**:
  - Docker containerization
  - Environment configuration
  - Health checks и monitoring
  - Database migration scripts

- **Production-подобное тестирование**:
  - Staging environment testing
  - Load testing для производительности
  - Database performance testing
  - Kafka message processing testing

- **Соответствие требованиям**:
  - Функциональные требования API
  - Нефункциональные требования (производительность, безопасность)
  - Бизнес-требования
  - Технические ограничения

## 4. API Endpoints

### 4.1 Аутентификация
- `POST /register` - Регистрация пользователя
- `POST /registeradmin` - Регистрация администратора
- `POST /login` - Вход в систему

### 4.2 Управление пользователями
- `GET /user` - Получение информации о пользователе
- `GET /allusers` - Получение списка всех пользователей
- `GET /userwithouttasks` - Получение пользователя без задач
- `GET /allusersname` - Получение имен всех пользователей (только для ADMIN)
- `DELETE /deleteuser/{username}` - Удаление пользователя (только для ADMIN)

### 4.3 Управление задачами
- `PUT /markthetaskascompleted` - Отметить задачу как выполненную
- `PUT /markthetaskasinwork` - Отметить задачу как находящуюся в работе
- `PUT /markthetaskasonrework` - Отправить задачу на доработку (только для ADMIN)
- `PUT /updatetask` - Обновить задачу (только для ADMIN)

### 4.4 Общие endpoints
- `GET /main` - Главная страница

## 5. Модель данных

### 5.1 Сущность Task
```java
- id: Long (Primary Key)
- title: String (обязательное)
- description: String
- status: Status (обязательное)
- importance: Importance (обязательное)
- deadline: LocalDateTime
- assignee: User (ManyToOne)
- comments: List<Comment> (OneToMany)
```

### 5.2 Сущность User
```java
- id: Long (Primary Key)
- username: String (уникальное, обязательное)
- password: String (обязательное)
- role: Role (обязательное)
- tasks: List<Task> (OneToMany)
```

### 5.3 Сущность Comment
```java
- id: Long (Primary Key)
- content: String
- task: Task (ManyToOne)
```

## 6. Безопасность

### 6.1 Аутентификация
- **JWT токены**: Stateless аутентификация
- **BCrypt хеширование**: Безопасное хранение паролей
- **Session Management**: STATELESS политика

### 6.2 Авторизация
- **Ролевая модель**: USER и ADMIN роли
- **Method-level security**: @PreAuthorize аннотации
- **Endpoint protection**: Различные уровни доступа

### 6.3 Конфигурация безопасности
- **CSRF**: Отключен для REST API
- **CORS**: Настроен для веб-клиентов
- **JWT Filter**: Кастомный фильтр для обработки токенов

## 7. Интеграции

### 7.1 Apache Kafka
- **Producer**: Отправка уведомлений
- **Consumer**: Обработка уведомлений
- **Topics**: Настраиваемые топики для различных типов уведомлений
- **Docker Compose**: Локальная инфраструктура Kafka

### 7.2 База данных
- **PostgreSQL**: Основная реляционная база данных
- **JPA/Hibernate**: ORM для работы с данными
- **Connection Pooling**: Управление соединениями

## 8. Развертывание

### 8.1 Docker Compose
```yaml
services:
  zookeeper: # Apache Zookeeper для Kafka
  kafka: # Apache Kafka брокер
  kafka-ui: # Веб-интерфейс для Kafka
```

### 8.2 Требования к окружению
- **Java**: 17+
- **Maven**: 3.6+
- **Docker**: 20.10+
- **PostgreSQL**: 13+

### 8.3 Конфигурация
- **Порт приложения**: 8080 (по умолчанию)
- **Порт Kafka**: 9092
- **Порт Kafka UI**: 8081
- **Порт Zookeeper**: 2181

## 9. Тестирование

### 9.1 Типы тестов
- **Unit тесты**: JUnit 5 + Mockito
- **Integration тесты**: Spring Boot Test
- **Security тесты**: Spring Security Test

### 9.2 Покрытие тестами
- **Service layer**: Бизнес-логика
- **Controller layer**: REST endpoints
- **Security layer**: Аутентификация и авторизация

## 10. Мониторинг и логирование

### 10.1 Логирование
- **SLF4J + Logback**: Структурированное логирование
- **Log levels**: INFO, DEBUG, ERROR
- **Request/Response logging**: Отслеживание API вызовов

### 10.2 Мониторинг
- **Kafka UI**: Мониторинг Kafka кластера
- **Application logs**: Логи приложения
- **Health checks**: Проверка состояния сервисов

## 11. Производительность

### 11.1 Оптимизации
- **Connection pooling**: Эффективное использование соединений с БД
- **Stateless architecture**: Масштабируемость

### 11.2 Рекомендации
- **Database indexing**: Индексы для часто используемых полей
- **Kafka partitioning**: Параллельная обработка сообщений
- **Caching**: Кэширование часто запрашиваемых данных

## 12. Безопасность данных

### 12.1 Защита данных
- **Password hashing**: BCrypt с солью
- **JWT security**: Подписанные токены с истечением срока
- **SQL injection protection**: JPA/Hibernate защита

### 12.2 Конфиденциальность
- **Data encryption**: Шифрование чувствительных данных
- **Access control**: Ролевая модель доступа
- **Audit logging**: Логирование действий пользователей

## 13. Планы развития

### 13.1 Краткосрочные цели
- Улучшение API документации (Swagger/OpenAPI)
- Расширение функциональности уведомлений
- Добавление метрик и мониторинга

### 13.2 Долгосрочные цели
- Микросервисная архитектура
- Интеграция с внешними системами
- Мобильное приложение

## 14. Контакты и поддержка

### 14.1 Команда разработки
- **Проект**: SpringProject1
- **Версия**: 0.0.1-SNAPSHOT
- **Статус**: В разработке

### 14.2 Документация
- **API Documentation**: В разработке
- **User Guide**: В разработке
- **Developer Guide**: В разработке

## 15. Соответствие стандартам

### 15.1 Национальный стандарт РФ
Данная документация разработана в соответствии с **ГОСТ Р ИСО/МЭК 12207-2010** "Системная и программная инженерия. Процессы жизненного цикла программных средств".

### 15.2 Обоснование выбора стандарта
Для проекта TaskTracker выбран национальный стандарт РФ ГОСТ Р ИСО/МЭК 12207-2010 по следующим причинам:

1. **Соответствие нормативной базе**: Стандарт является официальным в РФ и может использоваться в учебной и проектной документации.

2. **Полнота охвата**: Предоставляет полный и структурированный перечень процессов жизненного цикла ПО.

3. **Гибкость**: Не предписывает жесткую последовательность, что позволяет адаптировать его под итеративную разработку.

4. **Современность**: Учитывает весь жизненный цикл ПО от определения требований до изъятия из эксплуатации.

5. **Идентичность международному стандарту**: ГОСТ Р ИСО/МЭК 12207-2010 идентичен международному стандарту ИСО/МЭК 12207-2008.

### 15.3 Применяемые процессы
В рамках проекта TaskTracker применяются следующие процессы из ГОСТ Р ИСО/МЭК 12207-2010:

- **Процессы соглашения**: приобретение, поставка
- **Процессы проекта**: управление проектом, управление конфигурацией, обеспечение качества, верификация, аттестация
- **Технические процессы**: определение требований, анализ требований, архитектурное проектирование, интеграция, квалификационное тестирование
- **Процессы поддержки**: документирование, управление конфигурацией, обеспечение качества, верификация, аттестация

---

*Документация создана в соответствии с национальным стандартом РФ ГОСТ Р ИСО/МЭК 12207-2010 для технической документации программного обеспечения.*
